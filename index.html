<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Expense Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Slate, Stone, Sky) -->
    <!-- Application Structure Plan: A two-tab single-page application. The first tab (2024-2025 Review) and second tab (2025-2026 Forecast) are the primary navigation. Within each primary tab, a secondary navigation allows the user to switch between a 'Dashboard' view (with KPIs and charts) and a 'Detailed Report' view (with formatted text). This hierarchical structure keeps the interface clean while allowing users to choose their desired level of detail, moving from a quick visual summary to an in-depth textual analysis. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Key Metrics -> Goal: Inform -> Viz/Method: KPI Cards, Donut/Bar Charts (Chart.js) -> Interaction: Hover -> Justification: High-level visual summary.
        - Report Info: Detailed Text Analysis -> Goal: Explain -> Viz/Method: Structured cards and definition lists (HTML/Tailwind) -> Interaction: None -> Justification: Provides a clean, professional, and highly readable layout for the narrative report, improving on the previous clustered text.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .chart-container {
            position: relative;
            height: 320px;
            width: 100%;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .kpi-value {
            color: #0284c7; /* sky-600 */
        }
        .main-nav-btn {
            transition: all 0.3s ease;
        }
        .main-nav-btn.active {
            background-color: #0ea5e9; /* sky-500 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .main-nav-btn:not(.active):hover {
            background-color: #f1f5f9; /* slate-100 */
        }
        .sub-nav-btn {
            transition: all 0.2s ease-in-out;
            border-bottom: 2px solid transparent;
        }
        .sub-nav-btn.active {
            color: #0ea5e9; /* sky-500 */
            border-bottom-color: #0ea5e9;
        }
        .sub-nav-btn:not(.active):hover {
            color: #334155; /* slate-700 */
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">Student Expenditure Analysis</h1>
            <p class="mt-2 text-lg text-slate-600">An interactive overview of academic expenses.</p>
        </header>

        <nav class="flex justify-center mb-8 bg-white p-2 rounded-lg shadow-sm max-w-md mx-auto">
            <button id="main-nav-review" class="main-nav-btn active w-1/2 py-2 px-4 rounded-md font-semibold">2024-2025 Review</button>
            <button id="main-nav-forecast" class="main-nav-btn w-1/2 py-2 px-4 rounded-md font-semibold">2025-2026 Forecast</button>
        </nav>

        <main>
            <!-- 2024-2025 REVIEW SECTION -->
            <section id="review-section">
                <nav class="flex justify-center border-b mb-6 space-x-8">
                    <button id="sub-nav-review-dashboard" class="sub-nav-btn active font-semibold pb-2">Dashboard</button>
                    <button id="sub-nav-review-report" class="sub-nav-btn font-semibold pb-2">Detailed Report</button>
                </nav>

                <div id="review-dashboard-content">
                    <div class="text-center mb-8">
                        <h2 class="text-2xl font-bold text-slate-800">2024-2025 Dashboard</h2>
                        <p class="mt-1 text-md text-slate-500">A visual summary of all expenses incurred during the past academic year.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-lg shadow-md text-center"><h3 class="font-semibold text-slate-600">Total Expenditure</h3><p class="text-4xl font-bold mt-2 kpi-value">€39,032.57</p></div>
                        <div class="bg-white p-6 rounded-lg shadow-md text-center"><h3 class="font-semibold text-slate-600">Fixed Costs</h3><p class="text-4xl font-bold mt-2 kpi-value">€28,045.00</p><p class="text-sm text-slate-500 mt-1">Tuition, Rent & Fees</p></div>
                        <div class="bg-white p-6 rounded-lg shadow-md text-center"><h3 class="font-semibold text-slate-600">Variable Living Expenses</h3><p class="text-4xl font-bold mt-2 kpi-value">€11,047.57</p><p class="text-sm text-slate-500 mt-1">Based on logged expenses</p></div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                        <div class="lg:col-span-3 bg-white p-6 rounded-lg shadow-md"><h3 class="text-xl font-semibold mb-4 text-center">Living Expense Categories</h3><div class="chart-container"><canvas id="categoriesChart"></canvas></div></div>
                        <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-md"><h3 class="text-xl font-semibold mb-4 text-center">Total Cost Breakdown</h3><div class="chart-container"><canvas id="breakdownChart"></canvas></div><div class="mt-4 text-center border-t pt-4"><h4 class="font-semibold text-slate-600">Key Insight</h4><p class="text-2xl font-bold mt-2 kpi-value">€78.79</p><p class="text-sm text-slate-500">Average Weekly Grocery Spend</p></div></div>
                    </div>
                </div>

                <div id="review-report-content" class="hidden">
                    <div class="bg-white p-6 sm:p-8 rounded-lg shadow-md">
                        <h2 class="text-2xl font-bold text-slate-800 text-center">2024-2025 Academic Year Expense Summary</h2>
                        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h3 class="text-xl font-semibold text-slate-700 border-b pb-2">Overall Financial Summary</h3>
                                <p class="my-4 text-slate-600">The total cost for the academic year was <strong>€39,032.57</strong>, covering all educational and living costs.</p>
                                <dl class="space-y-3 mt-4">
                                    <div class="flex justify-between items-center bg-slate-50 p-3 rounded-md"><dt class="text-slate-500">Fixed Costs Total</dt><dd class="font-bold text-lg text-sky-600">€28,045.00</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Tuition Fee</dt><dd class="font-semibold">€19,600.00</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Total Rent</dt><dd class="font-semibold">€8,085.00</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Application Fee</dt><dd class="font-semibold">€300.00</dd></div>
                                    
                                    <div class="flex justify-between items-center bg-slate-50 p-3 rounded-md"><dt class="text-slate-500">Variable Expenses Total</dt><dd class="font-bold text-lg text-sky-600">€11,047.57</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Covered by Sponsorship</dt><dd class="font-semibold">€10,269.27</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Personally Covered</dt><dd class="font-semibold">€778.30</dd></div>
                                </dl>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-slate-700 border-b pb-2">Analysis of Living Expenses</h3>
                                <p class="my-4 text-slate-600">Spending was highest in the initial months due to setup costs. Dips in spending correspond with travel periods.</p>
                                <div class="space-y-3 mt-4">
                                    <div class="flex justify-between items-center bg-slate-50 p-3 rounded-md"><dt class="font-semibold text-slate-600">Top Spending Categories</dt><dd></dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Groceries (Avg. €78.79/week)</dt><dd class="font-semibold">€3,269.61</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Other expenses</dt><dd class="font-semibold">€2,464.12</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Transport</dt><dd class="font-semibold">€2,221.34</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Memberships & Fees</dt><dd class="font-semibold">€830.68</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Insurance</dt><dd class="font-semibold">€540.49</dd></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2025-2026 FORECAST SECTION -->
            <section id="forecast-section" class="hidden">
                <nav class="flex justify-center border-b mb-6 space-x-8">
                    <button id="sub-nav-forecast-dashboard" class="sub-nav-btn active font-semibold pb-2">Dashboard</button>
                    <button id="sub-nav-forecast-report" class="sub-nav-btn font-semibold pb-2">Detailed Report</button>
                </nav>

                <div id="forecast-dashboard-content">
                    <div class="text-center mb-8"><h2 class="text-2xl font-bold text-slate-800">2025-2026 Forecast Dashboard</h2><p class="mt-1 text-md text-slate-500">An estimated visual budget for the upcoming 10.5-month period.</p></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="bg-white p-6 rounded-lg shadow-md text-center"><h3 class="font-semibold text-slate-600">Est. Total Expenditure (10.5 mo)</h3><p class="text-4xl font-bold mt-2 kpi-value">€35,771.03</p></div>
                        <div class="bg-white p-6 rounded-lg shadow-md"><h3 class="text-xl font-semibold mb-4 text-center">Projected Monthly Budget</h3><div class="flex flex-wrap justify-around items-center text-center gap-4"><div><p class="font-semibold text-slate-600">Living</p><p class="text-3xl font-bold mt-1 kpi-value">€861.05</p></div><div class="text-2xl font-light text-slate-400">+</div><div><p class="font-semibold text-slate-600">Rent</p><p class="text-3xl font-bold mt-1 kpi-value">€660.00</p></div><div class="text-2xl font-light text-slate-400">=</div><div><p class="font-semibold text-slate-600">Total</p><p class="text-3xl font-bold mt-1 kpi-value">€1,521.05</p></div></div></div>
                    </div>
                     <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-md"><h3 class="text-xl font-semibold mb-4 text-center">Forecasted Cost Breakdown</h3><div class="chart-container max-w-md mx-auto"><canvas id="forecastBreakdownChart"></canvas></div></div>
                        <div class="bg-white p-6 rounded-lg shadow-md"><h3 class="text-xl font-semibold mb-2">How We Calculated The Forecast</h3><p class="text-slate-600 mb-4">To create a realistic budget, we started with last year's spending and made adjustments to exclude large, non-recurring purchases.</p><ul class="space-y-3"><li class="flex items-start"><span class="text-sky-500 font-bold text-xl mr-3">1.</span><div><h4 class="font-semibold">Started with 2024-25 Living Expenses</h4><p class="text-slate-500 text-sm">€11,047.57</p></div></li><li class="flex items-start"><span class="text-sky-500 font-bold text-xl mr-3">2.</span><div><h4 class="font-semibold">Removed One-Off Purchases</h4><p class="text-slate-500 text-sm">Excluded MacBook, bike, etc. (-€1,576.01)</p></div></li><li class="flex items-start"><span class="text-sky-500 font-bold text-xl mr-3">3.</span><div><h4 class="font-semibold">Calculated Monthly Average</h4><p class="text-slate-500 text-sm">Resulted in a recurring monthly average of €861.05</p></div></li><li class="flex items-start"><span class="text-sky-500 font-bold text-xl mr-3">4.</span><div><h4 class="font-semibold">Projected for 10.5 Months</h4><p class="text-slate-500 text-sm">This average was multiplied by 10.5 to get the final living expense forecast.</p></div></li></ul></div>
                    </div>
                </div>

                <div id="forecast-report-content" class="hidden">
                    <div class="bg-white p-6 sm:p-8 rounded-lg shadow-md">
                        <h2 class="text-2xl font-bold text-slate-800 text-center">2025-2026 Expense Guesstimate (10.5 Months)</h2>
                        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h3 class="text-xl font-semibold text-slate-700 border-b pb-2">Overall Estimated Forecast</h3>
                                <p class="my-4 text-slate-600">The estimated total expenditure for the 10.5-month period is <strong>€35,771.03</strong>.</p>
                                <dl class="space-y-3 mt-4">
                                    <div class="flex justify-between items-center bg-slate-50 p-3 rounded-md"><dt class="text-slate-500">Fixed Costs Total (10.5 mo)</dt><dd class="font-bold text-lg text-sky-600">€26,730.00</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Tuition Fee</dt><dd class="font-semibold">€19,800.00</dd></div>
                                    <div class="flex justify-between items-center pl-4"><dt class="text-slate-500">Rent & Utilities</dt><dd class="font-semibold">€6,930.00</dd></div>
                                    
                                    <div class="flex justify-between items-center bg-slate-50 p-3 rounded-md"><dt class="text-slate-500">Est. Living Expenses (10.5 mo)</dt><dd class="font-bold text-lg text-sky-600">€9,041.03</dd></div>
                                </dl>
                                <h3 class="text-xl font-semibold text-slate-700 border-b pb-2 mt-8">Projected Monthly Budget</h3>
                                <dl class="space-y-3 mt-4">
                                    <div class="flex justify-between items-center"><dt class="text-slate-500">Avg. Monthly Living Expenses</dt><dd class="font-semibold">€861.05</dd></div>
                                    <div class="flex justify-between items-center"><dt class="text-slate-500">Avg. Monthly Rent & Utilities</dt><dd class="font-semibold">€660.00</dd></div>
                                    <div class="flex justify-between items-center bg-slate-50 p-3 rounded-md"><dt class="text-slate-500">Avg. Total Monthly Cost</dt><dd class="font-bold text-lg text-sky-600">€1,521.05</dd></div>
                                </dl>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-slate-700 border-b pb-2">Derivation of Estimate</h3>
                                <p class="my-4 text-slate-600">The forecast was derived by adjusting last year's data for non-recurring costs.</p>
                                <ol class="list-decimal list-inside space-y-4 mt-4 text-slate-600">
                                    <li><strong>Starting Point:</strong> Began with the total logged expenses from 2024-25 (€11,047.57).</li>
                                    <li><strong>Exclusions:</strong> Removed one-off costs like the MacBook, bike, and initial home setup, totaling -€1,576.01.</li>
                                    <li><strong>Base Calculation:</strong> This left a base of €9,471.56 in recurring expenses over 11 months, yielding a monthly average of €861.05.</li>
                                    <li><strong>Final Forecast:</strong> The monthly average was projected over 10.5 months to arrive at the final living expense estimate of €9,041.03.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const reviewData = {
                categories: { labels: ['Groceries', 'Other expenses', 'Transport', 'Memberships & Fees', 'Insurance'], values: [3269.61, 2464.12, 2221.34, 830.68, 540.49] },
                breakdown: { labels: ['Tuition Fee', 'Rent', 'Living Expenses', 'Application Fee'], values: [19600.00, 8085.00, 11047.57, 300.00] }
            };
            const forecastData = {
                breakdown: { labels: ['Tuition Fee', 'Rent & Utilities', 'Living Expenses'], values: [19800.00, 6930.00, 9041.03] }
            };

            const mainNavReview = document.getElementById('main-nav-review');
            const mainNavForecast = document.getElementById('main-nav-forecast');
            const reviewSection = document.getElementById('review-section');
            const forecastSection = document.getElementById('forecast-section');
            
            const subNavReviewDashboard = document.getElementById('sub-nav-review-dashboard');
            const subNavReviewReport = document.getElementById('sub-nav-review-report');
            const reviewDashboardContent = document.getElementById('review-dashboard-content');
            const reviewReportContent = document.getElementById('review-report-content');
            
            const subNavForecastDashboard = document.getElementById('sub-nav-forecast-dashboard');
            const subNavForecastReport = document.getElementById('sub-nav-forecast-report');
            const forecastDashboardContent = document.getElementById('forecast-dashboard-content');
            const forecastReportContent = document.getElementById('forecast-report-content');

            let charts = {};
            const chartBackgroundColor = ['#38bdf8', '#67e8f9', '#a5f3fc', '#cffafe', '#e0f2fe'];
            const chartBorderColor = '#f8fafc';

            function createChart(canvasId, type, data, options) {
                if (charts[canvasId]) charts[canvasId].destroy();
                const ctx = document.getElementById(canvasId).getContext('2d');
                charts[canvasId] = new Chart(ctx, { type, data, options });
            }

            function initReviewCharts() {
                createChart('categoriesChart', 'bar', {
                    labels: reviewData.categories.labels,
                    datasets: [{ label: 'Cost (€)', data: reviewData.categories.values, backgroundColor: chartBackgroundColor, borderColor: chartBorderColor, borderWidth: 2, borderRadius: 4 }]
                }, { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `€${c.raw.toFixed(2)}` } } }, scales: { x: { beginAtZero: true, grid: { color: '#e2e8f0' } }, y: { grid: { display: false } } } });
                
                createChart('breakdownChart', 'doughnut', {
                    labels: reviewData.breakdown.labels,
                    datasets: [{ data: reviewData.breakdown.values, backgroundColor: chartBackgroundColor, borderColor: chartBorderColor, borderWidth: 4 }]
                }, { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' }, tooltip: { callbacks: { label: (c) => `${c.label}: €${c.raw.toFixed(2)}` } } } });
            }

            function initForecastChart() {
                createChart('forecastBreakdownChart', 'doughnut', {
                    labels: forecastData.breakdown.labels,
                    datasets: [{ data: forecastData.breakdown.values, backgroundColor: chartBackgroundColor, borderColor: chartBorderColor, borderWidth: 4 }]
                }, { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' }, tooltip: { callbacks: { label: (c) => `${c.label}: €${c.raw.toFixed(2)}` } } } });
            }

            mainNavReview.addEventListener('click', () => {
                reviewSection.classList.remove('hidden');
                forecastSection.classList.add('hidden');
                mainNavReview.classList.add('active');
                mainNavForecast.classList.remove('active');
                if (!reviewDashboardContent.classList.contains('hidden')) initReviewCharts();
            });

            mainNavForecast.addEventListener('click', () => {
                reviewSection.classList.add('hidden');
                forecastSection.classList.remove('hidden');
                mainNavReview.classList.remove('active');
                mainNavForecast.classList.add('active');
                if (!forecastDashboardContent.classList.contains('hidden')) initForecastChart();
            });

            subNavReviewDashboard.addEventListener('click', () => {
                reviewDashboardContent.classList.remove('hidden');
                reviewReportContent.classList.add('hidden');
                subNavReviewDashboard.classList.add('active');
                subNavReviewReport.classList.remove('active');
                initReviewCharts();
            });

            subNavReviewReport.addEventListener('click', () => {
                reviewDashboardContent.classList.add('hidden');
                reviewReportContent.classList.remove('hidden');
                subNavReviewDashboard.classList.remove('active');
                subNavReviewReport.classList.add('active');
            });

            subNavForecastDashboard.addEventListener('click', () => {
                forecastDashboardContent.classList.remove('hidden');
                forecastReportContent.classList.add('hidden');
                subNavForecastDashboard.classList.add('active');
                subNavForecastReport.classList.remove('active');
                initForecastChart();
            });

            subNavForecastReport.addEventListener('click', () => {
                forecastDashboardContent.classList.add('hidden');
                forecastReportContent.classList.remove('hidden');
                subNavForecastDashboard.classList.remove('active');
                subNavForecastReport.classList.add('active');
            });

            initReviewCharts();
        });
    </script>
</body>
</html>
